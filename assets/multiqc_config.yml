report_comment: >
  This report has been generated by the <a href="https://github.com/nf-core/stableexpression/tree/dev" target="_blank">nf-core/stableexpression</a>
  analysis pipeline. For information about how to interpret these results, please see the
  <a href="https://nf-co.re/stableexpression/dev/docs/output" target="_blank">documentation</a>.

report_section_order:
  "nf-core-stableexpression-methods-description":
    order: -1001
  software_versions:
    order: -1002
  "nf-core-stableexpression-summary":
    order: -1003

export_plots: true

run_modules:
  - custom_content

disable_version_detection: true

max_table_rows: 1000

custom_data:
  most_stable_genes:
    section_name: "Most stable genes"
    file_format: "csv"
    description: |
      Expression descriptive statistics of the 1000 most stable genes. Expression were normalised and cpm (counts per million) were used for all calculations.
    plot_type: "table"
    no_violin: true
    pconfig:
      col1_header: "Ensembl Gene ID"
    headers:
      m_measure:
        title: "M-measure"
        description: "Gene stability measure M as defined in Vandesompele et al., Genome Biology (2002). Lower values indicate higher stability. M-measures were calculated directly from cpm (counts per million)."
        format: "{:,.3f}"
      standard_deviation:
        title: "Std"
        description: "Standard deviation of the expression across samples. Expression was calculated as preprocessed as expression = log2(cpm + 1)."
        format: "{:,.3f}"
      variation_coefficient:
        title: "Var coeff"
        format: "{:,.3f}"
        description: "Variation coefficient: ratio of standard deviation to mean of expression across all samples. Expression was calculated as preprocessed as expression = log2(cpm + 1)."
      mean:
        title: "Mean"
        format: "{:,.3f}"
        description: "Average expression across samples. Expression was calculated as preprocessed as expression = log2(cpm + 1)."
      expression_level_quantile_interval:
        title: "Expr. score"
        description: "Quantile interval of the gene mean expression (among 100 intervals; min = 0, max = 99)"
        format: "{:,.0f}"
      quantile_interval_status:
        title: "Expr. status"
        description: "Indication about the average gene expression level compared to the whole pool of genes"
        cond_formatting_rules:
          fail:
            - s_eq: very_high_expression
            - s_eq: very_low_expression
          warn:
            - s_eq: high_expression
            - s_eq: low_expression
          pass:
            - s_eq: ok
      name:
        title: "Name"
        description: "Gene name as shown in Ensembl (g:Profiler)"
      description:
        title: "Description"
        description: "Gene description as shown in Ensembl (g:Profiler)"
      original_gene_ids:
        title: "IDs"
        description: "Original gene IDs as stated in the input (provided or downloaded) datasets"

  gene_statistics:
    section_name: "Descriptive statistics - All genes"
    file_format: "csv"
    description: |
      Distribution of descriptive statistics for all genes.
      Expression was calculated as log2(cpm + 1) were cpm is the normalised counts per million across all samples.
    plot_type: "violin"
    pconfig:
      col1_header: "Ensembl Gene ID"
    headers:
      # colors from https://colorbrewer2.org/#type=diverging&scheme=BrBG&n=8
      m_measure:
        title: "Gene stability measure M-measure"
        description: "Gene stability measure M as defined in Vandesompele et al., Genome Biology (2002)"
        color: "#bf812d"
      standard_deviation:
        title: "Standard deviation"
        description: "Standard deviation of the expression across samples"
        color: "#bf812d"
      variation_coefficient:
        title: "Variation coefficient"
        description: "Ratio of standard deviation to mean"
        color: "#f6e8c3"
      mean:
        title: "Average"
        description: "Average expression across samples"
        color: "#01665e"

  cpm_distributions:
    section_name: "CPM distribution by sample"
    file_format: "csv"
    description: |
      Distribution of gene counts per million (CPM) sample by sample.
      Expression was calculated as log2(cpm + 1) were cpm is the normalised counts per million across all samples.
    plot_type: "boxplot"

#violin_downsample_after: 10000

log_filesize_limit: 2000000000 # 2GB

sp:
  most_stable_genes:
    fn: "*stats_most_stable_genes.csv"
    max_filesize: 1000000 # 1MB
  gene_statistics:
    fn: "*stats_all_genes.csv"
    max_filesize: 50000000 # 50MB
  cpm_distributions:
    fn: "*log_counts.csv"
